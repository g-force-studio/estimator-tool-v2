Current focus:
- Fix photo upload failures (Supabase Storage signed uploads) and stabilize auth access during debugging.

What's working:
- /api/jobs/:id returns data for real job IDs on latest deployment.
- Env guards added for Supabase server/service clients to surface missing/blank keys.
- Auth bypass flag available via DISABLE_AUTH=true in middleware.

What's broken:
- Photo uploads fail via /api/uploads/signed with "JWS Protected Header is invalid".
- Email login disabled blocks access unless auth bypass is enabled.

Latest files touched:
- lib/supabase/service.ts
- lib/supabase/server.ts
- middleware.ts
- NOTES.md
- code_state.txt

Commands to run locally:
- npm run build

Last successful end-to-end test:
- /api/jobs/:id with real job ID (no upload).

Next 3 concrete steps:
1) Set DISABLE_AUTH=true in Vercel env vars and redeploy for debugging access.
2) Ensure SUPABASE_SERVICE_ROLE_KEY is the raw service role JWT (eyJ...) from Supabase API settings; redeploy.
3) Re-test /api/uploads/signed and job photo upload flow to confirm storage + job_files insert.
