Current focus:
- Resolve pdf-link Invalid JWT error so Open PDF works in Netlify.
- Ensure job status reaches complete after PDF generation.

What's working:
- Submit/Re-submit UI gating and PDF link shown only when status is complete.
- generate-pdf updates status to complete even if pdf_url update fails.
- pdf-link function now supports CORS and OPTIONS preflight.

What's broken / pending:
- pdf-link still returns Invalid JWT (likely stale session or project mismatch).
- Open PDF fails in Netlify until JWT issue is resolved.

Latest files touched:
- app/jobs/[id]/page.tsx
- app/home-content.tsx
- supabase/functions/pdf-link/index.ts
- supabase/functions/generate-pdf/index.ts
- NOTES.md
- code_state.txt

Commands to run locally:
- supabase functions deploy pdf-link
- supabase functions deploy generate-pdf

Last successful end-to-end test:
- PDF generation succeeded; Open PDF still failing due to Invalid JWT.

Next 3 concrete steps:
1) Deploy updated pdf-link Edge Function.
2) Clear site data, sign in again, verify Authorization header for pdf-link.
3) Re-test Open PDF from job detail and home list.
