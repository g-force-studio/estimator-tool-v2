Current focus:
- Add workspace-scoped prompt templates and ensure estimate route uses the workspace default prompt.
- Backfill existing workspaces with default ai_reference_configs.

What's working:
- Onboarding now captures trade and workspace creation seeds a default ai_reference_configs prompt from prompt_templates.
- Estimate route loads prompt via workspace.default_ai_reference_config_id -> workspace default -> prompt_templates -> fallback.
- AI materials cost is overwritten server-side from pricing_materials; prompt metadata is stored in ai_outputs.

What's broken / pending:
- Migration 20260125_add_workspace_prompt_schemes.sql must be run in Supabase.
- Backfill function must be executed to seed existing workspaces.
- Existing lint warnings remain (pre-existing).

Latest files touched:
- supabase/migrations/20260125_add_workspace_prompt_schemes.sql
- app/api/jobs/[id]/estimate/route.ts
- app/api/workspaces/route.ts
- app/onboarding/page.tsx
- lib/prompts.ts
- lib/validations.ts
- lib/supabase/database.types.ts
- supabase/schema.sql
- scripts/verify-workspace-prompts.js
- README.md

Commands to run locally:
- npm run lint
- WORKSPACE_ID=<workspace-id> RUN_BACKFILL=1 node scripts/verify-workspace-prompts.js
- WORKSPACE_ID=<workspace-id> JOB_ID=<job-id> node scripts/verify-workspace-prompts.js

Next 3 concrete steps:
1) Apply supabase/migrations/20260125_add_workspace_prompt_schemes.sql in Supabase.
2) Run: select public.backfill_workspace_ai_reference_configs();
3) Submit a job estimate and confirm ai_outputs.ai_json.metadata includes prompt_id/source/trade.
